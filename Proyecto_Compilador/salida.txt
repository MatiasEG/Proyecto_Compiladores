.CODE
                              PUSH main_ClaseMainModule
                              CALL
                              HALT
simple_malloc:
                              LOADFP
                              LOADSP
                              STOREFP
                              LOADHL
                              DUP
                              PUSH 1
                              ADD
                              STORE 4
                              LOAD 3
                              ADD
                              STOREHL
                              STOREFP
                              RET 1
.DATA
VT_ClaseW:
                              DW enteroW_ClaseW
VT_ClaseA:
                              DW enteroW_ClaseW, enteroX_ClaseX, enteroA_ClaseA
VT_ClaseString:
                              NOP
VT_ClaseObject:
                              NOP
VT_ClaseSystem:
                              NOP
VT_ClaseMainModule:
                              NOP
VT_ClaseX:
                              DW enteroW_ClaseW, enteroX_ClaseX
.CODE
debugPrint_ClaseObject:
                              LOADFP
                              LOADSP
                              STOREFP
                              LOAD 3
                              IPRINT
                              PRNLN
                              STOREFP
                              RET 1
enteroW_ClaseW:
                              LOADFP
                              LOADSP
                              STOREFP

                              FMEM 0
                              PUSH 1
                              STORE 4       ; Se coloca el valor de la expresion del return en la locacion que fue reservada para el retorno del metodo
                              STOREFP

                              RET 1       ; Se liberan 1 lugares de la pila
                              FMEM 0
                              STOREFP
                              RET 1
Constructor_W:
                              LOADFP
                              LOADSP
                              STOREFP
                              STOREFP
                              RET 0
enteroX_ClaseX:
                              LOADFP
                              LOADSP
                              STOREFP

                              FMEM 0
                              PUSH 101
                              STORE 4       ; Se coloca el valor de la expresion del return en la locacion que fue reservada para el retorno del metodo
                              STOREFP

                              RET 1       ; Se liberan 1 lugares de la pila
                              FMEM 0
                              STOREFP
                              RET 1
enteroA_ClaseA:
                              LOADFP
                              LOADSP
                              STOREFP

                              FMEM 0
                              PUSH 99
                              STORE 4       ; Se coloca el valor de la expresion del return en la locacion que fue reservada para el retorno del metodo

                              STOREFP
                              RET 1       ; Se liberan 1 lugares de la pila
                              FMEM 0
                              STOREFP
                              RET 1
Constructor_A:
                              LOADFP
                              LOADSP
                              STOREFP
                              STOREFP
                              RET 0
Constructor_String:
                              LOADFP
                              LOADSP
                              STOREFP
                              STOREFP
                              RET 0
Constructor_Object:
                              LOADFP
                              LOADSP
                              STOREFP
                              STOREFP
                              RET 0
read_ClaseSystem:
                              LOADFP
                              LOADSP
                              STOREFP
                              READ
                              STOREFP
                              RET 0
printBln_ClaseSystem:
                              LOADFP
                              LOADSP
                              STOREFP
                              LOAD 3
                              BPRINT
                              PRNLN
                              STOREFP
                              RET 1
printCln_ClaseSystem:
                              LOADFP
                              LOADSP
                              STOREFP
                              LOAD 3
                              CPRINT
                              PRNLN
                              STOREFP
                              RET 1
printI_ClaseSystem:
                              LOADFP
                              LOADSP
                              STOREFP
                              LOAD 3
                              IPRINT
                              STOREFP
                              RET 1
printIln_ClaseSystem:
                              LOADFP
                              LOADSP
                              STOREFP
                              LOAD 3
                              IPRINT
                              PRNLN
                              STOREFP
                              RET 1
printC_ClaseSystem:
                              LOADFP
                              LOADSP
                              STOREFP
                              LOAD 3
                              CPRINT
                              STOREFP
                              RET 1
println_ClaseSystem:
                              LOADFP
                              LOADSP
                              STOREFP
                              PRNLN
                              STOREFP
                              RET 0
printB_ClaseSystem:
                              LOADFP
                              LOADSP
                              STOREFP
                              LOAD 3
                              BPRINT
                              STOREFP
                              RET 1
printSln_ClaseSystem:
                              LOADFP
                              LOADSP
                              STOREFP
                              LOAD 3
                              SPRINT
                              PRNLN
                              STOREFP
                              RET 1
printS_ClaseSystem:
                              LOADFP
                              LOADSP
                              STOREFP
                              LOAD 3
                              SPRINT
                              STOREFP
                              RET 1
Constructor_System:
                              LOADFP
                              LOADSP
                              STOREFP
                              STOREFP
                              RET 0
main_ClaseMainModule:
                              LOADFP
                              LOADSP
                              STOREFP

                              RMEM 1 ; Se reserva espacio para una variable local
                              RMEM 1
                              PUSH 1       ; Tamaño del CIR (cant atributos + 1)
                              PUSH simple_malloc
                              CALL

                              DUP
                              PUSH VT_ClaseA       ; Se apila la dirección del comienzo de la virtual table
                              STOREREF 0        ; Se guarda la referencia a la virtual table en el CIR creado (el offset es 0)
                              PUSH Constructor_A
                              CALL

                              STORE 0 ; Se almacena el valor de la expresion en la variable local x
                              LOAD 0 ; Se apila el valor de la variable local o parametro x
                              RMEM 1 ; Se reserva lugar para el valor de retorno del metodo
                              SWAP
                              DUP ; Se duplica el this porque al hacer LOADREF se pierde
                              LOADREF 0 ; Se carga la VT
                              LOADREF 1
                              CALL
                              PUSH printIln_ClaseSystem
                              CALL
                              LOAD 0 ; Se apila el valor de la variable local o parametro x
                              RMEM 1 ; Se reserva lugar para el valor de retorno del metodo
                              SWAP
                              DUP ; Se duplica el this porque al hacer LOADREF se pierde
                              LOADREF 0 ; Se carga la VT
                              LOADREF 2
                              CALL
                              PUSH printIln_ClaseSystem
                              CALL


                              LOAD 0 ; Se apila el valor de la variable local o parametro x
                              RMEM 1 ; Se reserva lugar para el valor de retorno del metodo
                              SWAP
                              DUP ; Se duplica el this porque al hacer LOADREF se pierde
                              LOADREF 0 ; Se carga la VT
                              LOADREF 0



                              CALL
                              PUSH printIln_ClaseSystem
                              CALL
                              FMEM 1
                              STOREFP
                              RET 0
Constructor_MainModule:
                              LOADFP
                              LOADSP
                              STOREFP
                              STOREFP
                              RET 0
Constructor_X:
                              LOADFP
                              LOADSP
                              STOREFP
                              STOREFP
                              RET 0
